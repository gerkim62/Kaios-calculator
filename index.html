<html>
<head>
  <title>TujengePay Payment Form</title>
</head>
<body>
  <form id="payment-form">
    <label for="phone-number">Phone Number:</label>
    <input type="text" id="phone-number" name="phone-number">
    <br>
    <label for="amount">Amount:</label>
    <input type="text" id="amount" name="amount">
    <br>
    <button type="submit">Pay with TujengePay</button>
  </form>
  <script>
    const clientId = 'b2fc7ae0-8a33-11ed-a2cf-efc7a9973bc9';
    const clientSecret = 'aY2AYjC1wfDTBn9SSujZEpCfyIIcAmftiVLbXK7m';
    const organizationId = '67eb2500-8a32-11ed-acaa-9b542e8e486f';
    const externalIdentifier = 'YOUR_EXTERNAL_IDENTIFIER';
    
    async function getAccessToken() {
      try {
        const tokenResponse = await fetch('https://api.tujengepay.com/oauth/token', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ grant_type: 'client_credentials', client_id: clientId, client_secret: clientSecret })
        });
        const tokenData = await tokenResponse.json();
        return tokenData.access_token;
      } catch (error) {
        console.error(error);
      }
    }
    
    async function makePayment(phoneNumber, amount) {
      try {
        const accessToken = await getAccessToken();
        const response = await fetch('https://api.tujengepay.com/api/v1/quick/payments', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${accessToken}` },
          body: JSON.stringify({ organizationId, externalIdentifier, phoneNumber, amount })
        });
        const data = await response.json();
        console.log(data);
      } catch (error) {
        console.error(error);
      }
    }
    
    const form = document.getElementById('payment-form');
    form.addEventListener('submit', event => {
      event.preventDefault();
      const phoneNumber = document.getElementById('phone-number').value;
      const amount = document.getElementById('amount').value;
      makePayment(phoneNumber, amount);
    });
  </script>
</body>
</html>
